<!DOCTYPE HTML>
<html>
<head >
  <meta charset="utf-8">
  
  <title>第 4 页 | zeven&#39;s blog</title>

  
  <meta name="author" content="zeven0707&#39;s blog">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="zeven&#39;s blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  
  
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5005349780815724",
    enable_page_level_ads: true
  });
</script>

  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?223eea22355699157e147870eb124b24";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


  <link rel="manifest" href="/manifest.json">
  <link href="/favicon.ico" rel="icon">

  <link rel="alternate" href="/atom.xml" title="zeven&#39;s blog" type="application/atom+xml">
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">


</head>


<body>
<div class="blog">
  <div class="content">

    

    <header class="header-container" style="background-image: url('/images/blog-bg.jpg');">


<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header page-scroll">
          <button type="button" id="tglBtn" class="navbar-toggle">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">zeven0707&#39;s blog</a>
        </div>
        <div id="bosenyblog-navbar">
          <div class="navbar-collapse" id="bs-example-navbar-collapse-6">
            <ul class="nav navbar-nav navbar-right">
            
              <li><a href="/">主页</a></li>
            
              <li><a href="/archives">日志</a></li>
            
              <li><a href="/about">关于</a></li>
            
              <li><a href="/tags">标签</a></li>
            
            </ul>
          </div>
        </div>

    </div>
 </nav>
 <div class="gotop-btn">

 </div>
</header>

        
        <div class="container ">
          <div class="row">
            <main class="site-main posts-loop    col-lg-8 col-lg-offset-1
                    col-md-8 col-md-offset-1
                    col-sm-12
                    col-xs-12">
            
  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle11.2.0.4数据库修改用户名称/"><span>[Oracle]oracle11.2.0.4数据库修改用户名称</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle11.2.0.4数据库修改用户名称/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T15:19:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <p>1、用sysdba账号登入数据库，然后查询到要更改的用户信息</p>
<p><code>SELECT user#,name FROM user$;</code></p>
<p>2、更改用户名并提交</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">USER</span>$ <span class="keyword">SET</span> <span class="keyword">NAME</span>=<span class="string">'VTEBANK'</span> <span class="keyword">WHERE</span> <span class="keyword">user</span><span class="comment">#=84;</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p>3、强制刷新</p>
<p><code>ALTER SYSTEM CHECKPOINT;</code><br><code>ALTER SYSTEM FLUSH SHARED_POOL;</code></p>
<p>4、更新用户的密码</p>
<p><code>ALTER USER VTEBANK IDENTIFIED BY VTEBANK;</code></p>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle11.2.0.4数据库修改用户名称/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle Blob字段转字符串/"><span>[Oracle]oracle Blob字段转字符串</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle Blob字段转字符串/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T15:18:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <p><code>select dbms_lob.substr(IOF_CONTEXT) FROM IM_OPERATION_FLOW WHERE IOF_BATCHNO=&#39;3652&#39;;</code><br>转换的时候如果报错<br><code>[Err] ORA-06502: PL/SQL: 数字或值错误 : raw variable length too long</code><br>使用下面方法截取字符串<br><code>SELECT trim(dbms_lob.substr(IOF_CONTEXT,2000))  FROM IM_OPERATION_FLOW WHERE IOF_BATCHNO=&#39;3652&#39;</code></p>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle Blob字段转字符串/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle的jdbc连接方式oci和thin/"><span>[Oracle] oracle的jdbc连接方式:oci和thin</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle的jdbc连接方式oci和thin/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T15:13:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h1 id="1、thin和oci区别"><a href="#1、thin和oci区别" class="headerlink" title="1、thin和oci区别"></a>1、thin和oci区别</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">thin是一种瘦客户端的连接方式，即采用这种连接方式不需要安装oracle客户端,只要求classpath中包含jdbc驱动的jar包就行。thin就是纯粹用Java写的ORACLE数据库访问接口。</span><br><span class="line">oci是一种胖客户端的连接方式，即采用这种连接方式需要安装oracle客户端。oci是Oracle Call Interface的首字母缩写，是ORACLE公司提供了访问接口，就是使用Java来调用本机的Oracle客户端，然后再访问数据库，优点是速度 快，但是需要安装和配置数据库。</span><br></pre></td></tr></table></figure>

<h1 id="2、thin的连接方法"><a href="#2、thin的连接方法" class="headerlink" title="2、thin的连接方法"></a>2、thin的连接方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">jdbc:oracle:thin:@host:port:SID</span><br><span class="line">例如: jdbc:oracle:thin:@localhost:1521:orcl</span><br><span class="line"></span><br><span class="line">jdbc:oracle:thin:@&#x2F;&#x2F;host:port&#x2F;service_name</span><br><span class="line">例如: jdbc:oracle:thin:@&#x2F;&#x2F;localhost:1521&#x2F;orcl.city.com</span><br><span class="line"></span><br><span class="line">jdbc:oracle:thin:@TNSName</span><br><span class="line">例如:  jdbc:oracle:thin:@TNS_ALIAS_NAME</span><br><span class="line">jdbc:oracle:thin:@(DESCRIPTION&#x3D;(ADDRESS_LIST&#x3D;(ADDRESS&#x3D;(PROTOCOL&#x3D;TCP)(HOST&#x3D;192.168.16.91)(PORT&#x3D;1521)))(CONNECT_DATA&#x3D;(SERVICE_NAME&#x3D;orcl)))</span><br></pre></td></tr></table></figure>

<h1 id="3、oci的连接方法"><a href="#3、oci的连接方法" class="headerlink" title="3、oci的连接方法"></a>3、oci的连接方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:oracle:oci:@service_name</span><br></pre></td></tr></table></figure>
      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle的jdbc连接方式oci和thin/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle ONS服务/"><span>[Oracle]oracle ONS服务</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle ONS服务/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T15:05:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <p>1、ONS(Oracle Notification Service)是Oracle Clusterware 实现FAN Event Push模型的基础。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在传统模型中，客户端需要定期检索服务器来判断服务端的状态，本质上是一个PULL模型。ORACLE10引入了一种全新的PUSH机制--FAN(Fast Application Notification),当服务端发生某些事件时，服务器会主动的通知客户端这种变化，这样客户端就能尽早得知服务器端变化。而这种机制就是依赖ONS实现的。通常使用onsctl命令管理配置ONS，使用onsctl命令之前，需要先配置ONS服务。</span><br></pre></td></tr></table></figure>

<p>2、ons配置文件在grid的安装目录下/u01/app/11.2.0.4/grid/opmn/conf<br>more ons.config</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">usesharedinstall&#x3D;true</span><br><span class="line">allowgroup&#x3D;true</span><br><span class="line">localport&#x3D;6100		# line added by Agent</span><br><span class="line">remoteport&#x3D;6200		# line added by Agent</span><br><span class="line">nodes&#x3D;rac1:6200,rac2:6200		# line added by Agent</span><br></pre></td></tr></table></figure>

<p>&lt;1&gt;localport:这个参数代表本地监听端口，这里的”本地”特指127.0.0.1这个回环地址，用来和运行在本地的客户端进行通信。<br>&lt;2&gt;remoteport:这个参数代表的远程监听端口，也就是除了127.0.0.1以外的所有本机IP地址，用来和远程的客户端进行通信。<br>&lt;3&gt;loglevel:Oracle允许跟踪ONS进程的运行，并把日志记录到本地文件中。这个参数用来定义ONS进程要记录的日志级别，    从1～9，缺省值为3。<br>&lt;4&gt;logfile:这个参数和loglevel参数一起使用，用于定义ONS进程日志文件的位置，缺省是 $CRS_HOME/opmn/logs/opmn.log。<br>&lt;5&gt;nodes和useocr：这两个参数共同决定了本机的ONS daemon要和哪些节点上的ONS daemon进行通信。</p>
<p>3、查看ons启动端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp|grep ons</span><br><span class="line">(Not all processes could be identified, non-owned process info</span><br><span class="line"> will not be shown, you would have to be root to see it all.)</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">tcp        0      0 127.0.0.1:6100          0.0.0.0:*               LISTEN      2230/ons            </span><br><span class="line">tcp6       0      0 ::1:6100                :::*                    LISTEN      2230/ons            </span><br><span class="line">tcp6       0      0 :::6200                 :::*                    LISTEN      2230/ons</span><br></pre></td></tr></table></figure>

<p>4、onsctl命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[grid@rac1 opmn]$ onsctl help</span><br><span class="line">usage: onsctl [verbose] &lt;command&gt; [&lt;options&gt;]</span><br><span class="line">The verbose option enables debug tracing and logging (for the server start).</span><br><span class="line">Permitted &lt;command&gt;/&lt;options&gt; combinations are:</span><br><span class="line">command   options</span><br><span class="line">-------   ---------</span><br><span class="line">start                       - Start ons</span><br><span class="line">shutdown                    - Shutdown ons</span><br><span class="line">reload                      - Trigger ons to reread its configuration file</span><br><span class="line">debug     [&lt;attr&gt;=&lt;val&gt; ..] - Display ons server debug information</span><br><span class="line">set       [&lt;attr&gt;=&lt;val&gt; ..] - Set ons log parameters</span><br><span class="line">query     [&lt;attr&gt;=&lt;val&gt;]    - Query ons log parameters</span><br><span class="line">ping      [&lt;max-retry&gt;]     - Ping local ons</span><br><span class="line">help                        - Print brief usage description (this)</span><br><span class="line">usage     [&lt;command&gt;]       - Print detailed usage description</span><br></pre></td></tr></table></figure>

<p>ons进程在的情况下，不一定能确保ons状态正常，需要使用ping参数确认一下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[grid@rac1 opmn]$ onsctl ping</span><br><span class="line">ons is running ...</span><br></pre></td></tr></table></figure>

<p>5、停止启动ons服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">停止ons服务</span><br><span class="line">[grid@rac1 opmn]$ onsctl stop</span><br><span class="line">CRS-2673: Attempting to stop 'ora.ons' on 'rac1'</span><br><span class="line">CRS-2677: Stop of 'ora.ons' on 'rac1' succeeded</span><br><span class="line">查看ons服务在节点1上已经offline</span><br><span class="line">[grid@rac1 opmn]$ crsctl stat res -t</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">NAME           TARGET  STATE        SERVER                   STATE_DETAILS       </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Local Resources</span><br><span class="line">--------------------------------------------------------------------------------                                    </span><br><span class="line">ora.ons</span><br><span class="line">               OFFLINE OFFLINE      rac1                                         </span><br><span class="line">               ONLINE  ONLINE       rac2</span><br><span class="line">使用ons的ping参数去测试节点，提示ons已经没有运行了                                         </span><br><span class="line">[grid@rac1 opmn]$ onsctl ping</span><br><span class="line">ons is not running ...</span><br><span class="line">重新启动ons</span><br><span class="line">[grid@rac1 opmn]$ onsctl start</span><br><span class="line">CRS-2672: Attempting to start 'ora.ons' on 'rac1'</span><br><span class="line">CRS-2676: Start of 'ora.ons' on 'rac1' succeeded</span><br></pre></td></tr></table></figure>

<p>6、配置ONS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用racgons参数之前，需要修改ons.config配置文件，添加userocr=on参数</span><br><span class="line">添加ONS:</span><br><span class="line">racgons add_config hostname:port [hostname:port] [hostname:port]</span><br><span class="line"><span class="meta">$</span><span class="bash"> racgons add_config rac1:6200 rac2:6200</span></span><br><span class="line">删除ONS:</span><br><span class="line">racgons remove_config hostname[:port] [hostname:port] [hostname:port]</span><br><span class="line"><span class="meta">$</span><span class="bash"> racgons remove_config rac1:6200 rac2:6200</span></span><br></pre></td></tr></table></figure>

<p>注意：racgons命令建议用root身份执行，如果使用oracle、grid身份执行这个命令，不会提示任何错误信息，但是也不会更改任何配置。</p>
<p>7、ONS服务也可以由srvctl工具来维护，还可以跟踪ons的信息。下面是查看ons配置信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">srvctl config nodeapps -s</span></span><br><span class="line">[grid@rac1 ~]$ srvctl config nodeapps -s</span><br><span class="line">ONS exists: Local port 6100, remote port 6200, EM port 2016</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle ONS服务/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/sqlplus连接数据库缓慢问题/"><span>[Oracle] sqlplus连接数据库缓慢问题</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/sqlplus连接数据库缓慢问题/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:59:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h1 id="1、使用strace跟踪用户空间进程"><a href="#1、使用strace跟踪用户空间进程" class="headerlink" title="1、使用strace跟踪用户空间进程"></a>1、使用strace跟踪用户空间进程</h1><p><code>strace -t -T -o /tmp/sqlplus.log sqlplus / as sysdba</code><br>将日志打印到/tmp/sqlplus.log目录下，查看日志文件，发现去请求202.106.0.20这个ip耗时较长</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">15:26:40 munmap(0x7fbb152d3000, 28871)  &#x3D; 0 &lt;0.000024&gt;</span><br><span class="line">15:26:40 socket(AF_INET, SOCK_DGRAM|SOCK_CLOEXEC|SOCK_NONBLOCK, IPPROTO_IP) &#x3D; 9 &lt;0.000021&gt;</span><br><span class="line">15:26:40 connect(9, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(53), sin_addr&#x3D;inet_addr(&quot;202.106.0.20&quot;)&#125;, 16) &#x3D; 0 &lt;0.000043&gt;</span><br><span class="line">15:26:40 poll([&#123;fd&#x3D;9, events&#x3D;POLLOUT&#125;], 1, 0) &#x3D; 1 ([&#123;fd&#x3D;9, revents&#x3D;POLLOUT&#125;]) &lt;0.000017&gt;</span><br><span class="line">15:26:40 sendmmsg(9, &#123;&#123;&#123;msg_name(0)&#x3D;NULL, msg_iov(1)&#x3D;[&#123;&quot;|\266\1\0\0\1\0\0\0\0\0\0\7centos7\0015\0\0\1\0\1&quot;, 27&#125;], msg_controllen&#x3D;0, msg_flags&#x3D;MSG_EOR|MSG_WAITALL|MSG_SYN|MSG_CONFIRM|MSG_ERRQUEUE|MSG_NOSIGNAL|MSG_WAITFORONE|MSG_FASTOPEN|0x9a8a0000&#125;, 27&#125;, &#123;&#123;msg_name(0)&#x3D;NULL, msg_iov(1)&#x3D;[&#123;&quot;\320\1\1\0\0\1\0\0\0\0\0\0\7centos7\0015\0\0\34\0\1&quot;, 27&#125;], msg_controllen&#x3D;0, msg_flags&#x3D;MSG_CONFIRM&#125;, 27&#125;&#125;, 2, MSG_NOSIGNAL) &#x3D; 2 &lt;0.000088&gt;</span><br><span class="line">15:26:40 poll([&#123;fd&#x3D;9, events&#x3D;POLLIN&#125;], 1, 5000) &#x3D; 0 (Timeout) &lt;5.005164&gt;</span><br><span class="line">15:26:45 poll([&#123;fd&#x3D;9, events&#x3D;POLLOUT&#125;], 1, 0) &#x3D; 1 ([&#123;fd&#x3D;9, revents&#x3D;POLLOUT&#125;]) &lt;0.000023&gt;</span><br><span class="line">15:26:45 sendmmsg(9, &#123;&#123;&#123;msg_name(0)&#x3D;NULL, msg_iov(1)&#x3D;[&#123;&quot;|\266\1\0\0\1\0\0\0\0\0\0\7centos7\0015\0\0\1\0\1&quot;, 27&#125;], msg_controllen&#x3D;0, msg_flags&#x3D;MSG_EOR|MSG_WAITALL|MSG_SYN|MSG_CONFIRM|MSG_ERRQUEUE|MSG_NOSIGNAL|MSG_WAITFORONE|MSG_FASTOPEN|0x9a8a0000&#125;, 27&#125;, &#123;&#123;msg_name(0)&#x3D;NULL, msg_iov(1)&#x3D;[&#123;&quot;\320\1\1\0\0\1\0\0\0\0\0\0\7centos7\0015\0\0\34\0\1&quot;, 27&#125;], msg_controllen&#x3D;0, msg_flags&#x3D;MSG_CONFIRM&#125;, 27&#125;&#125;, 2, MSG_NOSIGNAL) &#x3D; 2 &lt;0.000149&gt;</span><br><span class="line">15:26:45 poll([&#123;fd&#x3D;9, events&#x3D;POLLIN&#125;], 1, 5000) &#x3D; 1 ([&#123;fd&#x3D;9, revents&#x3D;POLLIN&#125;]) &lt;0.219407&gt;</span><br><span class="line">15:26:45 ioctl(9, FIONREAD, [102])      &#x3D; 0 &lt;0.000026&gt;</span><br><span class="line">15:26:45 recvfrom(9, &quot;|\266\201\203\0\1\0\0\0\1\0\0\7centos7\0015\0\0\1\0\1\0\0\6\0\1&quot;..., 2048, 0, &#123;sa_family&#x3D;AF_INET, sin_port&#x3D;htons(53), sin_addr&#x3D;inet_addr(&quot;202.106.0.20&quot;)&#125;, [16]) &#x3D; 102 &lt;0.000041&gt;</span><br><span class="line">15:26:45 poll([&#123;fd&#x3D;9, events&#x3D;POLLIN&#125;], 1, 4779) &#x3D; 0 (Timeout) &lt;4.783905&gt;</span><br><span class="line">15:26:50 poll([&#123;fd&#x3D;9, events&#x3D;POLLOUT&#125;], 1, 0) &#x3D; 1 ([&#123;fd&#x3D;9, revents&#x3D;POLLOUT&#125;]) &lt;0.000022&gt;</span><br><span class="line">15:26:50 sendto(9, &quot;|\266\1\0\0\1\0\0\0\0\0\0\7centos7\0015\0\0\1\0\1&quot;, 27, MSG_NOSIGNAL, NULL, 0) &#x3D; 27 &lt;0.000118&gt;</span><br><span class="line">15:26:50 poll([&#123;fd&#x3D;9, events&#x3D;POLLIN&#125;], 1, 5000) &#x3D; 0 (Timeout) &lt;5.005199&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2、查看这个ip是用于dns解析的ip，发现当前网络去请求这个ip有问题，连接较慢，因此将该dns配置ip修改为其他，如（114-114-114-114），修改完成重启网络，再次使用命令sqlplus-as-sysdba，访问恢复正常。"><a href="#2、查看这个ip是用于dns解析的ip，发现当前网络去请求这个ip有问题，连接较慢，因此将该dns配置ip修改为其他，如（114-114-114-114），修改完成重启网络，再次使用命令sqlplus-as-sysdba，访问恢复正常。" class="headerlink" title="2、查看这个ip是用于dns解析的ip，发现当前网络去请求这个ip有问题，连接较慢，因此将该dns配置ip修改为其他，如（114.114.114.114），修改完成重启网络，再次使用命令sqlplus / as sysdba，访问恢复正常。"></a>2、查看这个ip是用于dns解析的ip，发现当前网络去请求这个ip有问题，连接较慢，因此将该dns配置ip修改为其他，如（114.114.114.114），修改完成重启网络，再次使用命令sqlplus / as sysdba，访问恢复正常。</h1>
      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/sqlplus连接数据库缓慢问题/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle报错ora01113,ORA-01110尝试恢复数据库，又报错ORA-00279/"><span>[Oracle] oracle报错ora01113,ORA-01110尝试恢复数据库，又报错ORA-00279,ORA-00289,ORA-00280</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle报错ora01113,ORA-01110尝试恢复数据库，又报错ORA-00279/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:57:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h1 id="1、数据库服务器异常宕机，之后重启数据库出现如下报错"><a href="#1、数据库服务器异常宕机，之后重启数据库出现如下报错" class="headerlink" title="1、数据库服务器异常宕机，之后重启数据库出现如下报错"></a>1、数据库服务器异常宕机，之后重启数据库出现如下报错</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">16:55:28 SYS@ boston&gt; startup;</span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 1603411968 bytes</span><br><span class="line">Fixed Size		    2253664 bytes</span><br><span class="line">Variable Size		  587205792 bytes</span><br><span class="line">Database Buffers	 1006632960 bytes</span><br><span class="line">Redo Buffers		    7319552 bytes</span><br><span class="line">Database mounted.</span><br><span class="line">ORA-01113: file 6 needs media recovery</span><br><span class="line">ORA-01110: data file 6: '/home/oracle/test11101.dbf'</span><br></pre></td></tr></table></figure>

<h1 id="2、先将数据文件offline"><a href="#2、先将数据文件offline" class="headerlink" title="2、先将数据文件offline"></a>2、先将数据文件offline</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">16:55:42 SYS@ boston&gt; alter database datafile '/home/oracle/test11101.dbf' offline;</span><br><span class="line">Database altered.</span><br><span class="line">Elapsed: 00:00:00.11</span><br></pre></td></tr></table></figure>

<h1 id="3、尝试恢复数据文件，报错"><a href="#3、尝试恢复数据文件，报错" class="headerlink" title="3、尝试恢复数据文件，报错"></a>3、尝试恢复数据文件，报错</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">16:57:47 SYS@ boston&gt; alter database recover datafile '/home/oracle/test11101.dbf';</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">recover</span> <span class="keyword">datafile</span> <span class="string">'/home/oracle/test11101.dbf'</span></span><br><span class="line">*</span><br><span class="line"><span class="keyword">ERROR</span> <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845310493</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">06</span>/<span class="number">25</span>/<span class="number">2019</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">37</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_491_gkp2y4ok_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845310493</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#491</span></span><br><span class="line">Elapsed: <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.20</span></span><br></pre></td></tr></table></figure>

<h1 id="4、根据提示，使用logfile文件修复数据库"><a href="#4、根据提示，使用logfile文件修复数据库" class="headerlink" title="4、根据提示，使用logfile文件修复数据库"></a>4、根据提示，使用logfile文件修复数据库</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">17:04:09 SYS@ boston&gt; ALTER DATABASE RECOVER LOGFILE '/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_491_gkp2y4ok_.arc';</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_491_gkp2y4ok_.arc'</span></span><br><span class="line">*</span><br><span class="line"><span class="keyword">ERROR</span> <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845334483</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">15</span>:<span class="number">46</span>:<span class="number">11</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_492_gkp4ph5t_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845334483</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#492</span></span><br><span class="line"></span><br><span class="line">Elapsed: <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.14</span></span><br><span class="line"><span class="number">17</span>:<span class="number">11</span>:<span class="number">25</span> <span class="keyword">SYS</span>@ boston&gt;  <span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_492_gkp4ph5t_.arc'</span>;</span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_492_gkp4ph5t_.arc'</span></span><br><span class="line">*</span><br><span class="line"><span class="keyword">ERROR</span> <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845337765</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">16</span>:<span class="number">16</span>:<span class="number">14</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_493_gkp4pn61_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845337765</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#493</span></span><br><span class="line"></span><br><span class="line">Elapsed: <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.23</span></span><br><span class="line"><span class="number">17</span>:<span class="number">12</span>:<span class="number">04</span> <span class="keyword">SYS</span>@ boston&gt;  <span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_493_gkp4pn61_.arc'</span>;</span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_493_gkp4pn61_.arc'</span></span><br><span class="line">*</span><br><span class="line"><span class="keyword">ERROR</span> <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845337802</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">16</span>:<span class="number">16</span>:<span class="number">19</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_494_gkp4q3b5_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845337802</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#494</span></span><br><span class="line"></span><br><span class="line">Elapsed: <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.21</span></span><br><span class="line"><span class="number">17</span>:<span class="number">14</span>:<span class="number">50</span> <span class="keyword">SYS</span>@ boston&gt;  <span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">LOGFILE</span> <span class="string">'/data/u01/app/oracle/fast_recovery_area/BOSTON/archivelog/2019_07_02/o1_mf_1_494_gkp4q3b5_.arc'</span>;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line">Elapsed: 00:00:00.47</span><br><span class="line">17:15:13 SYS@ boston&gt; alter database datafile '/home/oracle/test11101.dbf' online;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br></pre></td></tr></table></figure>

<h1 id="5、至此test11101-dbf数据文件修复完成，尝试打开数据库"><a href="#5、至此test11101-dbf数据文件修复完成，尝试打开数据库" class="headerlink" title="5、至此test11101.dbf数据文件修复完成，尝试打开数据库"></a>5、至此test11101.dbf数据文件修复完成，尝试打开数据库</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">17:15:43 SYS@ boston&gt; alter database open;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span></span><br><span class="line">*</span><br><span class="line"><span class="keyword">ERROR</span> <span class="keyword">at</span> line <span class="number">1</span>:</span><br><span class="line">ORA<span class="number">-01113</span>: <span class="keyword">file</span> <span class="number">7</span> needs media <span class="keyword">recovery</span></span><br><span class="line">ORA<span class="number">-01110</span>: <span class="keyword">data</span> <span class="keyword">file</span> <span class="number">7</span>: <span class="string">'/home/oracle/zeven01.dbf'</span></span><br><span class="line">Elapsed: <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.16</span></span><br></pre></td></tr></table></figure>


<h1 id="6、提示另一个数据文件也需要恢复"><a href="#6、提示另一个数据文件也需要恢复" class="headerlink" title="6、提示另一个数据文件也需要恢复"></a>6、提示另一个数据文件也需要恢复</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">17:15:52 SYS@ boston&gt; recover databases;</span><br><span class="line">ORA-00905: missing keyword</span><br><span class="line"></span><br><span class="line">17:16:05 SYS@ boston&gt; recover database;（这里选择让auto修复数据库）</span><br><span class="line">ORA-00279: <span class="keyword">change</span> <span class="number">55845310493</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">06</span>/<span class="number">25</span>/<span class="number">2019</span> <span class="number">11</span>:<span class="number">00</span>:<span class="number">37</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_491_gkp2y4ok_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845310493</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#491</span></span><br><span class="line"></span><br><span class="line"><span class="number">17</span>:<span class="number">19</span>:<span class="number">35</span> Specify <span class="keyword">log</span>: &#123;&lt;RET&gt;=suggested | filename | <span class="keyword">AUTO</span> | <span class="keyword">CANCEL</span>&#125;</span><br><span class="line"><span class="keyword">auto</span></span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845334483</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">15</span>:<span class="number">46</span>:<span class="number">11</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_492_gkp4ph5t_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845334483</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#492</span></span><br><span class="line"></span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845337765</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">16</span>:<span class="number">16</span>:<span class="number">14</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_493_gkp4pn61_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845337765</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#493</span></span><br><span class="line"></span><br><span class="line">ORA<span class="number">-00279</span>: <span class="keyword">change</span> <span class="number">55845337802</span> <span class="keyword">generated</span> <span class="keyword">at</span> <span class="number">07</span>/<span class="number">02</span>/<span class="number">2019</span> <span class="number">16</span>:<span class="number">16</span>:<span class="number">19</span> needed <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span></span><br><span class="line">ORA<span class="number">-00289</span>: suggestion : /<span class="keyword">data</span>/u01/app/<span class="keyword">oracle</span>/fast_recovery_area/BOSTON/<span class="keyword">archivelog</span>/<span class="number">2019</span>_07_02/o1_mf_1_494_gkp4q3b5_.arc</span><br><span class="line">ORA<span class="number">-00280</span>: <span class="keyword">change</span> <span class="number">55845337802</span> <span class="keyword">for</span> <span class="keyword">thread</span> <span class="number">1</span> <span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">sequence</span> <span class="comment">#494</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Log</span> applied.</span><br><span class="line">Media <span class="keyword">recovery</span> complete.</span><br><span class="line"><span class="keyword">oracle</span>修复数据库完成，打开数据库</span><br><span class="line"><span class="number">17</span>:<span class="number">20</span>:<span class="number">02</span> <span class="keyword">SYS</span>@ boston&gt; <span class="keyword">alter</span> <span class="keyword">database</span> <span class="keyword">open</span>;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br></pre></td></tr></table></figure>

<h1 id="7、查看数据文件和表空间均已正常"><a href="#7、查看数据文件和表空间均已正常" class="headerlink" title="7、查看数据文件和表空间均已正常"></a>7、查看数据文件和表空间均已正常</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">17:21:57 SYS@ boston&gt; select file_name,status from dba_data_files;</span><br><span class="line">FILE_NAME																					        STATUS</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------</span></span><br><span class="line">/data/u01/app/oracle/oradata/boston/users01.dbf 																        AVAILABLE</span><br><span class="line">/data/u01/app/oracle/oradata/boston/undotbs01.dbf																        AVAILABLE</span><br><span class="line">/data/u01/app/oracle/oradata/boston/sysaux01.dbf																        AVAILABLE</span><br><span class="line">/data/u01/app/oracle/oradata/boston/system01.dbf																        AVAILABLE</span><br><span class="line">/data/u01/app/oracle/oradata/boston/test001.dbf 																        AVAILABLE</span><br><span class="line">/home/oracle/test11101.dbf																			        AVAILABLE</span><br><span class="line">/home/oracle/zeven01.dbf																			        AVAILABLE</span><br><span class="line">7 rows selected.</span><br><span class="line">Elapsed: 00:00:00.04</span><br><span class="line"></span><br><span class="line">17:22:21 SYS@ boston&gt; select tablespace_name,status from dba_tablespaces;</span><br><span class="line">TABLESPACE_NAME 	       STATUS</span><br><span class="line"><span class="comment">------------------------------ ---------</span></span><br><span class="line">SYSTEM			       ONLINE</span><br><span class="line">SYSAUX			       ONLINE</span><br><span class="line">UNDOTBS1		       ONLINE</span><br><span class="line">TEMP			       ONLINE</span><br><span class="line">USERS			       ONLINE</span><br><span class="line">TEST			       ONLINE</span><br><span class="line">TEST11			       ONLINE</span><br><span class="line">ZEVEN			       ONLINE</span><br><span class="line">8 rows selected.</span><br><span class="line">Elapsed: 00:00:00.03</span><br><span class="line">17:22:59 SYS@ boston&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle报错ora01113,ORA-01110尝试恢复数据库，又报错ORA-00279/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/数据库驱动程序Oracle's Driver (Thin)与Oracle's Driver(Thin XA)的区别/"><span>[Oracle] 数据库驱动程序Oracle&#39;s Driver (Thin)与Oracle&#39;s Driver(Thin XA)的区别</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/数据库驱动程序Oracle's Driver (Thin)与Oracle's Driver(Thin XA)的区别/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:50:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">XA连接区别于非XA连接。要记住的是XA连接是一个JTA事务中的参与者。这就意味着XA连接不支持JDBC的自动提交特性。也就是说应用程序不必在XA连接上调用java.sql.Connection.commit（）或java.sql.Connection.rollback（）。相反，应用程序应该使用UserTransaction.begin（）、UserTransaction.commit（）和UserTransaction.rollback().</span><br><span class="line"></span><br><span class="line">JTA事务比JDBC事务更强大。一个JTA事务可以有多个参与者，而一个JDBC事务则被限定在一个单一的数据库连接。下列任一个Java平台的组件都可以参与到一个JTA事务中：JDBC连接、JDO PersistenceManager 对象、JMS 队列、JMS 主题、企业JavaBeans（EJB）、一个用J2EE Connector Architecture 规范编译的资源分配器。</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/数据库驱动程序Oracle's Driver (Thin)与Oracle's Driver(Thin XA)的区别/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle查看asm磁盘使用情况/"><span>[Oracle] oracle查看asm磁盘使用情况</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle查看asm磁盘使用情况/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:46:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">col total_size for a10;</span><br><span class="line">col free_size for a20;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span>,total_mb/<span class="number">1024</span> || <span class="string">'G'</span> <span class="keyword">as</span> total_size , free_mb/<span class="number">1024</span> || <span class="string">'G'</span> <span class="keyword">as</span> free_size <span class="keyword">from</span> v$asm_diskgroup;</span><br></pre></td></tr></table></figure>


      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle查看asm磁盘使用情况/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle远程漏洞投毒扫描工具Metasploit/"><span>[Oracle] oracle远程漏洞投毒扫描工具</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle远程漏洞投毒扫描工具Metasploit/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:43:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h1 id="1、安装扫描工具"><a href="#1、安装扫描工具" class="headerlink" title="1、安装扫描工具"></a>1、安装扫描工具</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall &amp;&amp; \</span><br><span class="line">chmod 755 msfinstall &amp;&amp; \</span><br><span class="line">./msfinstall</span><br></pre></td></tr></table></figure>

<h1 id="2、扫描相应的数据库"><a href="#2、扫描相应的数据库" class="headerlink" title="2、扫描相应的数据库"></a>2、扫描相应的数据库</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@node3 soft]# msfconsole</span><br><span class="line">[-] ***rting the Metasploit Framework console...|</span><br><span class="line">[-] * WARNING: No database support: No database YAML file</span><br><span class="line">[-] ***</span><br><span class="line">      .:okOOOkdc'           'cdkOOOko:.</span><br><span class="line">    .xOOOOOOOOOOOOc       cOOOOOOOOOOOOx.</span><br><span class="line">   :OOOOOOOOOOOOOOOk,   ,kOOOOOOOOOOOOOOO:</span><br><span class="line">  'OOOOOOOOOkkkkOOOOO: :OOOOOOOOOOOOOOOOOO'</span><br><span class="line">  oOOOOOOOO.    .oOOOOoOOOOl.    ,OOOOOOOOo</span><br><span class="line">  dOOOOOOOO.      .cOOOOOc.      ,OOOOOOOOx</span><br><span class="line">  lOOOOOOOO.         ;d;         ,OOOOOOOOl</span><br><span class="line">  .OOOOOOOO.   .;           ;    ,OOOOOOOO.</span><br><span class="line">   cOOOOOOO.   .OOc.     'oOO.   ,OOOOOOOc</span><br><span class="line">    oOOOOOO.   .OOOO.   :OOOO.   ,OOOOOOo</span><br><span class="line">     lOOOOO.   .OOOO.   :OOOO.   ,OOOOOl</span><br><span class="line">      ;OOOO'   .OOOO.   :OOOO.   ;OOOO;</span><br><span class="line">       .dOOo   .OOOOocccxOOOO.   xOOd.</span><br><span class="line">         ,kOl  .OOOOOOOOOOOOO. .dOk,</span><br><span class="line">           :kk;.OOOOOOOOOOOOO.cOk:</span><br><span class="line">             ;kOOOOOOOOOOOOOOOk:</span><br><span class="line">               ,xOOOOOOOOOOOx,</span><br><span class="line">                 .lOOOOOOOl.</span><br><span class="line">                    ,dOd,</span><br><span class="line">                      .</span><br><span class="line"></span><br><span class="line">       =[ metasploit v5.0.27-dev-                         ]</span><br><span class="line">+ -- --=[ 1895 exploits - 1067 auxiliary - 329 post       ]</span><br><span class="line">+ -- --=[ 547 payloads - 44 encoders - 10 nops            ]</span><br><span class="line">+ -- --=[ 2 evasion                                       ]</span><br></pre></td></tr></table></figure>

<p>指定扫描数据库的ip地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msf5 &gt;  use auxiliary&#x2F;scanner&#x2F;oracle&#x2F;tnspoison_checker</span><br><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; set rhosts 192.168.168.177</span><br><span class="line">rhosts &#x3D;&gt; 192.168.168.177</span><br></pre></td></tr></table></figure>

<p>查看配置选项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; show options</span><br><span class="line">Module options (auxiliary&#x2F;scanner&#x2F;oracle&#x2F;tnspoison_checker):</span><br><span class="line"></span><br><span class="line">   Name     Current Setting  Required  Description</span><br><span class="line">   ----     ---------------  --------  -----------</span><br><span class="line">   RHOSTS   192.168.168.177  yes       The target address range or CIDR identifier</span><br><span class="line">   RPORT    1521             yes       The target port (TCP)</span><br><span class="line">   THREADS  1                yes       The number of concurrent threads</span><br></pre></td></tr></table></figure>

<p>进行漏洞扫描</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; run</span><br><span class="line">[+] 192.168.168.177:1521 - 192.168.168.177:1521 is vulnerable</span><br><span class="line">[*] 192.168.168.177:1521 - Scanned 1 of 1 hosts (100% complete)</span><br><span class="line">[*] Auxiliary module execution completed</span><br></pre></td></tr></table></figure>

<p>根据提示177该服务器是易受攻击的，说明存在漏洞<br>下面是具体进行渗透测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; use auxiliary&#x2F;admin&#x2F;oracle&#x2F;tnscmd</span><br><span class="line">msf5 auxiliary(admin&#x2F;oracle&#x2F;tnscmd) &gt; set rhosts 192.168.168.177</span><br><span class="line">rhosts &#x3D;&gt; 192.168.168.177</span><br><span class="line">msf5 auxiliary(admin&#x2F;oracle&#x2F;tnscmd) &gt; show options</span><br><span class="line">Module options (auxiliary&#x2F;admin&#x2F;oracle&#x2F;tnscmd):</span><br><span class="line"></span><br><span class="line">   Name    Current Setting                   Required  Description</span><br><span class="line">   ----    ---------------                   --------  -----------</span><br><span class="line">   CMD     (CONNECT_DATA&#x3D;(COMMAND&#x3D;VERSION))  no        Something like ping, version, status, etc..</span><br><span class="line">   RHOSTS  192.168.168.177                   yes       The target address range or CIDR identifier</span><br><span class="line">   RPORT   1521                              yes       The target port (TCP)</span><br><span class="line"></span><br><span class="line">msf5 auxiliary(admin&#x2F;oracle&#x2F;tnscmd) &gt; run</span><br><span class="line">[*] Running module against 192.168.168.177</span><br><span class="line"></span><br><span class="line">[*] 192.168.168.177:1521 - Sending &#39;(CONNECT_DATA&#x3D;(COMMAND&#x3D;VERSION))&#39; to 192.168.168.177:1521</span><br><span class="line">[*] 192.168.168.177:1521 - writing 90 bytes.</span><br><span class="line">[*] 192.168.168.177:1521 - reading</span><br><span class="line">[*] 192.168.168.177:1521 - .e......&quot;..Y(DESCRIPTION&#x3D;(TMP&#x3D;)(VSNNUM&#x3D;186647552)(ERR&#x3D;1189)(ERROR_STACK&#x3D;(ERROR&#x3D;(CODE&#x3D;1189)(EMFI&#x3D;4))))</span><br><span class="line">[*] Auxiliary module execution completed</span><br></pre></td></tr></table></figure>

<p>修改oracle服务端的监听配置文件listener.ora,增加下列内容<br>单实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VALID_NODE_CHECKING_REGISTRATION_LISTENER &#x3D;ON</span><br><span class="line">REGISTRATION_INVITED_NODES_LISTENER&#x3D;(192.168.168.177)</span><br></pre></td></tr></table></figure>

<p>多实例<br>listener.ora文件添加如下内容（RAC)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">VALID_NODE_CHECKING_REGISTRATION_LISTENER_SCAN*&#x3D;ON</span><br><span class="line">VALID_NODE_CHECKING_REGISTRATION_LISTENER_SCAN2&#x3D;ON</span><br><span class="line">VALID_NODE_CHECKING_REGISTRATION_LISTENER_SCAN1&#x3D;ON</span><br><span class="line">VALID_NODE_CHECKING_REGISTRATION_LISTENER &#x3D;ON</span><br><span class="line">REGISTRATION_INVITED_NODES_LISTENER&#x3D;(两台host的IP都列进来)</span><br></pre></td></tr></table></figure>

<p>重新加载监听</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsnrctl reload</span><br></pre></td></tr></table></figure>

<p>再次重新检测</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">msf5 auxiliary(admin&#x2F;oracle&#x2F;tnscmd) &gt; use auxiliary&#x2F;scanner&#x2F;oracle&#x2F;tnspoison_checker</span><br><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt;  set rhosts 192.168.168.177</span><br><span class="line">rhosts &#x3D;&gt; 192.168.168.177</span><br><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; show options</span><br><span class="line"></span><br><span class="line">Module options (auxiliary&#x2F;scanner&#x2F;oracle&#x2F;tnspoison_checker):</span><br><span class="line"></span><br><span class="line">   Name     Current Setting  Required  Description</span><br><span class="line">   ----     ---------------  --------  -----------</span><br><span class="line">   RHOSTS   192.168.168.177  yes       The target address range or CIDR identifier</span><br><span class="line">   RPORT    1521             yes       The target port (TCP)</span><br><span class="line">   THREADS  1                yes       The number of concurrent threads</span><br><span class="line"></span><br><span class="line">msf5 auxiliary(scanner&#x2F;oracle&#x2F;tnspoison_checker) &gt; run</span><br><span class="line"></span><br><span class="line">[-] 192.168.168.177:1521 - 192.168.168.177:1521 is not vulnerable</span><br><span class="line">[*] 192.168.168.177:1521 - Scanned 1 of 1 hosts (100% complete)</span><br><span class="line">[*] Auxiliary module execution completed</span><br></pre></td></tr></table></figure>


      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle远程漏洞投毒扫描工具Metasploit/"><span>点击阅读</span></a></h3>
    
  
</article>





  <article class="article-container ">

  
    
    <h3 class="article-title"><a href="/2019/09/21/oracle exp导出报错EXP-00091Exporting questionable statistics/"><span>[Oracle] oracle exp导出报错EXP-00091: Exporting questionable statistics</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/09/21/oracle exp导出报错EXP-00091Exporting questionable statistics/" rel="bookmark">
        <time class="entry-date published" datetime="2019-09-21T14:29:00.000Z">
          2019-09-21
        </time>
      </a>
    </span>
    <br />
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h1 id="1、报错原因"><a href="#1、报错原因" class="headerlink" title="1、报错原因"></a>1、报错原因</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库字符集与当前系统NLS_LANG参数不匹配</span><br></pre></td></tr></table></figure>

<h1 id="2、解决方法"><a href="#2、解决方法" class="headerlink" title="2、解决方法"></a>2、解决方法</h1><p>查看数据库的字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> userenv(<span class="string">'language'</span>) <span class="keyword">from</span> dual;</span><br><span class="line">USERENV('LANGUAGE')</span><br><span class="line"><span class="comment">------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">AMERICAN_AMERICA.ZHS16GBK</span><br></pre></td></tr></table></figure>

<p>声明NLS_LANG参数<br><code>export NLS_LANG=AMERICAN_AMERICA.ZHS16GBK</code><br>再次执行导出<br><code>exp \&quot;/ as sysdba \&quot; tables=sys.aud$ file=/tmp/cbi1_daochu.dmp</code></p>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/oracle/">oracle</a>
    </span>
    

    </div>

    
  </div>
  
    
    <h3 class="article-read"><a href="/2019/09/21/oracle exp导出报错EXP-00091Exporting questionable statistics/"><span>点击阅读</span></a></h3>
    
  
</article>






<nav class="pagination">
  
  <a href="/page/3/" class="pagination-prev">上一页</a>
  
  
  <a href="/page/5/" class="pagination-next">下一页</a>
  
</nav>
            </main>
            <div class="sidebar
                    col-lg-3 col-lg-offset-0
                    col-md-3 col-md-offset-0
                    col-sm-12
                    col-xs-12
                    sidebar-container
                ">

                <div class="sidebar-container">



<div class="search-container">
<form class="site-search-form">
    <span class="glyphicon glyphicon-search"></span><input type="text" id="local-search-input" class="st-search-input" placeholder="Search..." />
</form>
<div id="local-search-result" class="local-search-result-cls"></div>
</div>
<script type="text/javascript" id="local.search.active">
var inputArea       = document.querySelector("#local-search-input");
inputArea.onclick   = function(){ getSearchFile(); this.onclick = null }
inputArea.onkeydown = function(){ if(event.keyCode == 13) return false }
</script>




    <div class="categories-container" style="margin-top:40px;">
        <p>归档:</p>
            
    </div>




    <div class="social-container" style="margin-top:40px;">
        <p>Links:</p>
            
                
                    <li class="social-item"><i class="fa fa-fw fa-github"></i><a href="https://github.com/zeven0707">GitHub</a></li>
                
            
    </div>

</div>
            </div>
          </div>
        </div>
        
    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/BosenY/Lap" target="_blank">Lap</a>
    <br/><span id="busuanzi_container_site_uv"> 
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
    </br>
    
      
        &copy; 2020 zeven0707&#39;s blog
      
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-92842840-1', 'auto');
    ga('send', 'pageview');

</script>


  </div>

</div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.bootcss.com/vue/2.5.13/vue.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <script src="https://unpkg.com/draw-something/dist/draw.min.js"></script>
  <script>
    let maxNum = Number.parseInt('30')
    let iconText = '❤'
    let color = 'red'
    new Draw({maxNum, iconText, color})
  </script>

<script src="/js/index.js"></script>
<script src="/js/search.js"></script>

</body>
</html>